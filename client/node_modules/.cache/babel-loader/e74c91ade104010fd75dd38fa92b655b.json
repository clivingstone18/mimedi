{"ast":null,"code":"import moment from \"moment\";\nexport const getTodaysEvents = info => {\n  let events = [];\n\n  for (let i = 0; i < info.length; i++) {\n    if (moment().diff(new Date(info[i].start)) < 0 && moment().diff(new Date(info[i].start)) > -129600000) {\n      console.log(moment().diff(new Date(info[i].start)));\n      events.push(info[i]);\n    }\n  }\n\n  return events;\n};\n/* gets the number of app u have had of a given */\n\nexport const getCompletedApps = info => {\n  let numApps = 0;\n\n  for (let i = 0; i < info.length; i++) {\n    if (moment().diff(new Date(info[i].start)) > 0) {\n      numApps++;\n    }\n  }\n\n  return numApps;\n};\nexport const getAllApps = () => {\n  gapi.load(\"client:auth2\", () => {\n    gapi.client.init({\n      apiKey: API_KEY,\n      clientId: CLIENT_ID,\n      discoveryDocs: DISCOVERY_DOCS,\n      scope: SCOPES\n    });\n    gapi.client.load(\"calendar\", \"v3\", () => console.log(\"hello?\"));\n    let instance = gapi.auth2.getAuthInstance().signIn().then(() => {\n      let request = gapi.client.calendar.events.list({\n        calendarId: \"primary\",\n        showDeleted: false,\n        orderBy: \"updated\",\n        maxResults: 2000\n      });\n      request.execute(event => {\n        let res = event.items.filter(i => i.summary && i.summary.includes(\"MiMedi\"));\n        let psychApps = res.filter(i => i.summary && i.summary.includes(\"Psychologist\"));\n        psychApps = psychApps.map(elem => {\n          return {\n            title: elem.summary,\n            start: new Date(elem.start.dateTime),\n            end: new Date(elem.start.dateTime),\n            allDay: false,\n            type: \"Psych\"\n          };\n        });\n        let GPApps = res.filter(i => i.summary && i.summary.includes(\"GP\"));\n        GPApps = GPApps.map(elem => {\n          return {\n            title: elem.summary,\n            start: new Date(elem.start.dateTime),\n            end: new Date(elem.start.dateTime),\n            allDay: false,\n            type: \"Gp\"\n          };\n        });\n        let OpApps = res.filter(i => i.summary && i.summary.includes(\"Optometrist\"));\n        OpApps = OpApps.map(elem => {\n          return {\n            title: elem.summary,\n            start: new Date(elem.start.dateTime),\n            end: new Date(elem.start.dateTime),\n            allDay: false,\n            type: \"Op\"\n          };\n        });\n        let DentApps = res.filter(i => i.summary && i.summary.includes(\"Dentist\"));\n        DentApps = DentApps.map(elem => {\n          return {\n            title: elem.summary,\n            start: new Date(elem.start.dateTime),\n            end: new Date(elem.start.dateTime),\n            allDay: false,\n            type: \"Dent\"\n          };\n        });\n        let gynoApps = res.filter(i => i.summary && i.summary.includes(\"Gynaecologist\"));\n        gynoApps = gynoApps.map(elem => {\n          return {\n            title: elem.summary,\n            start: new Date(elem.start.dateTime),\n            end: new Date(elem.start.dateTime),\n            allDay: false,\n            type: \"Gyno\"\n          };\n        });\n        let meds = res.filter(i => i.summary && i.summary.includes(\"Dose of\"));\n        let medsEvents = [];\n        meds.map(elem => {\n          let numDays = elem.recurrence[0].split(\"COUNT=\")[1];\n          let currentDate = moment(new Date(elem.start.dateTime));\n          console.log(currentDate);\n\n          for (let i = 0; i < numDays; i++) {\n            medsEvents.push({\n              title: elem.summary,\n              start: currentDate._d,\n              end: currentDate._d,\n              allDay: true,\n              type: \"Med\"\n            });\n            currentDate = moment(currentDate).add(1, \"days\");\n          }\n        });\n        return {\n          numGP: getCompletedApps(GPApps),\n          numDent: getCompletedApps(DentApps),\n          numOp: getCompletedApps(OpApps),\n          numPsych: getCompletedApps(psychApps),\n          numGyno: getCompletedApps(gynoApps)\n        };\n      });\n    });\n  });\n};\nexport const addNewEvent = (summary, location, start, end) => {\n  var event = {\n    summary: \"MiMedi: \" + summary,\n    location: location,\n    start: start,\n    end: end\n  };\n  return event;\n};\nexport const addCalendarEvent = async info => {\n  return new Promise((resolve, reject) => {\n    let startRaw = new Date(info.date);\n    let endRaw = new Date(info.date);\n    endRaw.setMinutes(startRaw.getMinutes() + 30);\n    let start = {\n      dateTime: new Date(info.date).toISOString().toString(),\n      timeZone: \"Australia/Sydney\"\n    };\n    let end = {\n      dateTime: endRaw.toISOString().toString(),\n      timeZone: \"Australia/Sydney\"\n    };\n    var gapi = window.gapi;\n    var CLIENT_ID = \"249886028801-4635vef8o4vjcgj539du52m6go3u3vnk.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyBlj1VnMflja9kGA73CB4VQ1rHTa2-oOO4\";\n    var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\n    var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n    gapi.load(\"client:auth2\", () => {\n      gapi.client.init({\n        apiKey: API_KEY,\n        clientId: CLIENT_ID,\n        discoveryDocs: DISCOVERY_DOCS,\n        scope: SCOPES\n      });\n      gapi.client.load(\"calendar\", \"v3\", () => {\n        let instance = gapi.auth2.getAuthInstance().then(() => {\n          var event = addNewEvent(info.summary, info.location, start, end);\n          var request = gapi.client.calendar.events.insert({\n            calendarId: \"primary\",\n            resource: event\n          });\n          request.execute(event => {\n            window.open(event.htmlLink);\n            resolve(\"DONE\");\n          });\n        });\n      });\n    });\n  });\n};\nexport const addEvent = async event => {\n  return new Promise((resolve, reject) => {\n    var gapi = window.gapi;\n    var CLIENT_ID = \"249886028801-4635vef8o4vjcgj539du52m6go3u3vnk.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyBlj1VnMflja9kGA73CB4VQ1rHTa2-oOO4\";\n    var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\n    var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n    gapi.load(\"client:auth2\", () => {\n      gapi.client.init({\n        apiKey: API_KEY,\n        clientId: CLIENT_ID,\n        discoveryDocs: DISCOVERY_DOCS,\n        scope: SCOPES\n      });\n      gapi.client.load(\"calendar\", \"v3\", () => {\n        let instance = gapi.auth2.getAuthInstance().then(() => {\n          var request = gapi.client.calendar.events.insert({\n            calendarId: \"primary\",\n            resource: event\n          });\n          request.execute(event => {\n            resolve(\"DONE\");\n          });\n        });\n      });\n    });\n  });\n};","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/healthpass/client/src/Calendar/Calendar.js"],"names":["moment","getTodaysEvents","info","events","i","length","diff","Date","start","console","log","push","getCompletedApps","numApps","getAllApps","gapi","load","client","init","apiKey","API_KEY","clientId","CLIENT_ID","discoveryDocs","DISCOVERY_DOCS","scope","SCOPES","instance","auth2","getAuthInstance","signIn","then","request","calendar","list","calendarId","showDeleted","orderBy","maxResults","execute","event","res","items","filter","summary","includes","psychApps","map","elem","title","dateTime","end","allDay","type","GPApps","OpApps","DentApps","gynoApps","meds","medsEvents","numDays","recurrence","split","currentDate","_d","add","numGP","numDent","numOp","numPsych","numGyno","addNewEvent","location","addCalendarEvent","Promise","resolve","reject","startRaw","date","endRaw","setMinutes","getMinutes","toISOString","toString","timeZone","window","insert","resource","open","htmlLink","addEvent"],"mappings":"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","sourcesContent":["import moment from \"moment\"\n\nexport const getTodaysEvents = (info) => {\n  let events = [];\n  for (let i = 0; i < info.length; i++) {\n    if (\n      moment().diff(new Date(info[i].start)) < 0 &&\n      moment().diff(new Date(info[i].start)) > -129600000\n    ) {\n      console.log(moment().diff(new Date(info[i].start)));\n      events.push(info[i]);\n    }\n  }\n  return events;\n};\n\n/* gets the number of app u have had of a given */ \n\nexport const getCompletedApps = (info) => {\n  let numApps = 0;\n  for (let i = 0; i < info.length; i++) {\n    if (moment().diff(new Date(info[i].start)) > 0) {\n      numApps++;\n    }\n  }\n  return numApps;\n};\n\nexport const getAllApps = () => {\n\n  gapi.load(\"client:auth2\", () => {\n    gapi.client.init({\n      apiKey: API_KEY,\n      clientId: CLIENT_ID,\n      discoveryDocs: DISCOVERY_DOCS,\n      scope: SCOPES,\n    });\n\n    gapi.client.load(\"calendar\", \"v3\", () => console.log(\"hello?\"));\n\n    let instance = gapi.auth2\n      .getAuthInstance()\n      .signIn()\n      .then(() => {\n        let request = gapi.client.calendar.events.list({\n          calendarId: \"primary\",\n          showDeleted: false,\n          orderBy: \"updated\",\n          maxResults: 2000,\n        });\n\n        request.execute((event) => {\n          let res = event.items.filter(\n            (i) => i.summary && i.summary.includes(\"MiMedi\")\n          );\n\n          let psychApps = res.filter(\n            (i) => i.summary && i.summary.includes(\"Psychologist\")\n          );\n          psychApps = psychApps.map((elem) => {\n            return {\n              title: elem.summary,\n              start: new Date(elem.start.dateTime),\n              end: new Date(elem.start.dateTime),\n              allDay: false,\n              type: \"Psych\",\n            };\n          });\n          let GPApps = res.filter(\n            (i) => i.summary && i.summary.includes(\"GP\")\n          );\n          GPApps = GPApps.map((elem) => {\n            return {\n              title: elem.summary,\n              start: new Date(elem.start.dateTime),\n              end: new Date(elem.start.dateTime),\n              allDay: false,\n              type: \"Gp\",\n            };\n          });\n          let OpApps = res.filter(\n            (i) => i.summary && i.summary.includes(\"Optometrist\")\n          );\n\n          OpApps = OpApps.map((elem) => {\n            return {\n              title: elem.summary,\n              start: new Date(elem.start.dateTime),\n              end: new Date(elem.start.dateTime),\n              allDay: false,\n              type: \"Op\",\n            };\n          });\n\n          let DentApps = res.filter(\n            (i) => i.summary && i.summary.includes(\"Dentist\")\n          );\n\n          DentApps = DentApps.map((elem) => {\n            return {\n              title: elem.summary,\n              start: new Date(elem.start.dateTime),\n              end: new Date(elem.start.dateTime),\n              allDay: false,\n              type: \"Dent\",\n            };\n          });\n\n          let gynoApps = res.filter(\n            (i) => i.summary && i.summary.includes(\"Gynaecologist\")\n          );\n\n          gynoApps = gynoApps.map((elem) => {\n            return {\n              title: elem.summary,\n              start: new Date(elem.start.dateTime),\n              end: new Date(elem.start.dateTime),\n              allDay: false,\n              type: \"Gyno\",\n            };\n          });\n\n\n\n\n          let meds = res.filter(\n            (i) => i.summary && i.summary.includes(\"Dose of\")\n          );\n          let medsEvents = [];\n\n          meds.map((elem) => {\n            let numDays = elem.recurrence[0].split(\"COUNT=\")[1];\n            let currentDate = moment(new Date(elem.start.dateTime));\n            console.log(currentDate);\n            for (let i = 0; i < numDays; i++) {\n              medsEvents.push({\n                title: elem.summary,\n                start: currentDate._d,\n                end: currentDate._d,\n                allDay: true,\n                type: \"Med\",\n              });\n              currentDate = moment(currentDate).add(1, \"days\");\n            }\n          });\n\n          return {numGP:getCompletedApps(GPApps), \n            numDent:getCompletedApps(DentApps),\n            numOp: getCompletedApps(OpApps),\n            numPsych:getCompletedApps(psychApps),\n            numGyno:getCompletedApps(gynoApps)\n          }\n        })\n      })\n    })\n  }\n\n\nexport const addNewEvent = (summary, location, start, end) => {\n  var event = {\n    summary: \"MiMedi: \" + summary,\n    location: location,\n    start: start,\n    end: end,\n  };\n  return event;\n};\n\nexport const addCalendarEvent = async (info) => {\n  return new Promise((resolve, reject) => {\n    let startRaw = new Date(info.date);\n    let endRaw = new Date(info.date);\n    endRaw.setMinutes(startRaw.getMinutes() + 30);\n\n    let start = {\n      dateTime: new Date(info.date).toISOString().toString(),\n      timeZone: \"Australia/Sydney\",\n    };\n\n    let end = {\n      dateTime: endRaw.toISOString().toString(),\n      timeZone: \"Australia/Sydney\",\n    };\n\n    var gapi = window.gapi;\n    var CLIENT_ID =\n      \"249886028801-4635vef8o4vjcgj539du52m6go3u3vnk.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyBlj1VnMflja9kGA73CB4VQ1rHTa2-oOO4\";\n    var DISCOVERY_DOCS = [\n      \"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\",\n    ];\n    var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n\n    gapi.load(\"client:auth2\", () => {\n      gapi.client.init({\n        apiKey: API_KEY,\n        clientId: CLIENT_ID,\n        discoveryDocs: DISCOVERY_DOCS,\n        scope: SCOPES,\n      });\n\n      gapi.client.load(\"calendar\", \"v3\", () => {\n        let instance = gapi.auth2.getAuthInstance().then(() => {\n          var event = addNewEvent(info.summary, info.location, start, end);\n\n          var request = gapi.client.calendar.events.insert({\n            calendarId: \"primary\",\n            resource: event,\n          });\n\n          request.execute((event) => {\n            window.open(event.htmlLink);\n            resolve(\"DONE\")\n          });\n        });\n      });\n    });\n  });\n};\n\n\n\n\n\nexport const addEvent = async (event) => {\n  return new Promise((resolve, reject) => {\n\n    var gapi = window.gapi;\n    var CLIENT_ID =\n      \"249886028801-4635vef8o4vjcgj539du52m6go3u3vnk.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyBlj1VnMflja9kGA73CB4VQ1rHTa2-oOO4\";\n    var DISCOVERY_DOCS = [\n      \"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\",\n    ];\n    var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n\n    gapi.load(\"client:auth2\", () => {\n      gapi.client.init({\n        apiKey: API_KEY,\n        clientId: CLIENT_ID,\n        discoveryDocs: DISCOVERY_DOCS,\n        scope: SCOPES,\n      });\n\n      gapi.client.load(\"calendar\", \"v3\", () => {\n          let instance = gapi.auth2.getAuthInstance().then(() => {      \n              var request = gapi.client.calendar.events.insert({\n                calendarId: \"primary\",\n                resource: event,\n              });\n    \n              request.execute((event) => {\n                resolve(\"DONE\")\n              });\n            });\n      });\n    });\n  });\n};\n"]},"metadata":{},"sourceType":"module"}